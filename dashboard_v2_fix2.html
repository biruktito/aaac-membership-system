<!-- Duplicate to bypass caching; version stamp v2-fix2 -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AAAC Dashboard v2 FIX2 (Firestore)</title>
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <style>body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;margin:0;background:#f8fafc;color:#0f172a}header{padding:16px;background:#0ea5e9;color:#fff}main{padding:16px;max-width:1100px;margin:0 auto}.cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px;margin:12px 0}.card{background:#fff;border-radius:10px;box-shadow:0 1px 3px rgba(0,0,0,.08);padding:14px}.row{display:flex;gap:10px;align-items:center}.list{display:grid;gap:8px;margin-top:16px}.member{background:#fff;border:1px solid #e2e8f0;border-radius:8px;padding:12px}.badge{display:inline-block;padding:2px 8px;border-radius:999px;font-size:12px}.badge.current{background:#dcfce7;color:#166534}.badge.behind{background:#fee2e2;color:#991b1b}.muted{color:#475569;font-size:13px}button{background:#0ea5e9;color:#fff;border:0;padding:8px 12px;border-radius:8px;cursor:pointer}button.secondary{background:#e2e8f0;color:#0f172a}.warn{color:#b91c1c}.green{color:#166534}</style>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
  <script>window.firebaseConfig=window.firebaseConfig||{apiKey:"AIzaSyDa4rimRWUUgPp7LAAaZzyrn13MKM-9naA",authDomain:"aaac-membership-1221.firebaseapp.com",projectId:"aaac-membership-1221",storageBucket:"aaac-membership-1221.firebasestorage.app",messagingSenderId:"134230731518",appId:"1:134230731518:web:2eb24bfa5cb9e9df2453af",measurementId:"G-YJJD19WXBG"};</script>
  <script src="docs/firebase-init.js"></script>
  <script src="docs/financial_validator.js"></script>
</head>
<body>
  <header>
    <div class="row" style="justify-content: space-between;">
      <div>
        <div style="font-weight:700; font-size:18px;">AAAC Membership System — v2 FIX2 (Firestore)</div>
        <div class="muted">Version v2-fix2 • Toggle check present: <span id="toggleCheck">(loading)</span></div>
      </div>
      <div class="row">
        <button id="btnSignInEmail" class="secondary">Sign in (Email)</button>
        <button id="btnClaimPhoneId" class="secondary">Sign in (Phone+ID)</button>
        <button id="btnSignOut" class="secondary" style="display:none;">Sign out</button>
        <span id="roleBadge" class="muted" style="margin-left:12px; font-weight:600;"></span>
      </div>
    </div>
  </header>
  <main>
    <div class="cards">
      <div class="card"><div>Total Members</div><div id="statTotal" style="font-size:24px; font-weight:700;">—</div></div>
      <div class="card"><div>Current</div><div id="statCurrent" style="font-size:24px; font-weight:700;">—</div></div>
      <div class="card"><div>Behind</div><div id="statBehind" style="font-size:24px; font-weight:700;">—</div></div>
      <div class="card"><div>Owed by Active</div><div id="statOwed" style="font-size:24px; font-weight:700;">—</div></div>
    </div>
    <div class="row" style="gap:8px;">
      <input id="search" placeholder="Search members by name..." style="flex:1; padding:10px; border:1px solid #cbd5e1; border-radius:8px;" />
      <select id="filterStatus" style="padding:10px; border:1px solid #cbd5e1; border-radius:8px;">
        <option value="all">All</option>
        <option value="current">Current</option>
        <option value="behind">Behind</option>
        <option value="issue">Issue</option>
        <option value="risk">Risk</option>
        <option value="inactive">Inactive</option>
      </select>
      <label class="muted" style="display:flex; align-items:center; gap:6px;">
        <input type="checkbox" id="toggleSource" /> Use validator JSON
      </label>
      <button id="refresh">Recalculate</button>
    </div>
    <div id="list" class="list"></div>
  </main>
  <!-- Reuse the same script from dashboard_v2_fix.html by referencing it dynamically is not possible; embed minimal boot to test toggle -->
  <script>
    document.addEventListener('DOMContentLoaded',()=>{
      const el=document.getElementById('toggleSource');
      const ok=!!el; document.getElementById('toggleCheck').textContent=ok?'yes':'no';
    });
  </script>
</body>
</html>


